索引
-

###### 什么是索引

索引是对数据库表中的一列或多列的值进行排序的一种结构，用于对数据库的列的值进行结构化排序

优点：

加快查询和排序

缺点：

1. 增加存储空间
2. 影响查询和修改性能

###### 聚簇索引

InnoDB中使用，索引和数据保存在一个B+树中，一个表只能有一个聚簇索引，默认主键。因为保存在一起，所以查询索引的同时可以直接获得数据

优点

1. 仅需要一次查询，效率高与非聚簇索引
2. 索引和数据保存在一起，因此是有序的，对于范围查询效果高

缺点

1. 更新代价高，因为可能导致数据移动
2. 插入速度依赖插入顺序，按照主键插入最快
3. 插入和更新可能导致页分裂（页：具有一定大小的连续的存储区域）
4. 可能导致全表扫描变慢，因为可能需要加载物理上相隔较远的页到内存（耗时的磁盘寻道操作）

###### 非聚簇索引

MyISAM中使用，又叫二级索引，索引记录的是行的主键值，因此需要两次查询（第一次查询索引得到主键，第二次通过主键查询聚簇索引），一个表可以建立多个索引

###### 使用原则

1. 小表没必要加索引
2. 不要设置过多索引，过多的索引导致更多的磁盘消耗、数据修改时更多的性能消耗
3. 合理使用复合索引
4. 经常范围查询的字段，使用聚簇索引
5. 避免对不常用、逻辑性质（性别、是否）、大字段创建索引





